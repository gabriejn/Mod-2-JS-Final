<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Box Organizer</title>
  <style>
    /* Center and style the content */
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f2f2f2;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      font-size: 24px;
      margin-bottom: 20px;
    }

    input[type="text"] {
      width: 70%;
      padding: 10px;
      margin-right: 10px;
    }

    button {
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
    }

    /* Style boxes and items */
    .box {
      display: inline-block;
      vertical-align: top;
      width: 30%;
      margin: 0 1.5%;
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 20px;
      box-sizing: border-box;
    }

    .box h2 {
      font-size: 18px;
    }

    .box ul {
      list-style: none;
      padding: 0;
    }

    .box li {
      margin: 5px 0;
    }

    /* Checkbox styles */
    .checkbox-label {
      display: inline-block;
      margin-right: 10px;
    }

    /* Dropdown styles */
    select {
      padding: 10px;
      margin-right: 10px;
    }

    /* Popup styles */
    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 20px;
      background-color: white;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Box Organizer</h1>

    <!-- Checkboxes for adding boxes or items -->
    <label class="checkbox-label">
      <input type="checkbox" id="addBoxCheckbox" checked> Add Box
    </label>
    <label class="checkbox-label">
      <input type="checkbox" id="addItemCheckbox"> Add Item
    </label>

    <!-- Input for box name (only visible when adding a box) -->
    <input type="text" id="boxNameInput" placeholder="Box Name" style="display: none;">

    <!-- Input for item name (only visible when adding an item) -->
    <input type="text" id="itemNameInput" placeholder="Item Name" style="display: none;">

    <!-- Dropdown for selecting the box to add items -->
    <select id="selectBoxToAdd">
      <option value="" disabled selected>Select Box</option>
      <!-- Populate this dropdown with box names dynamically using JavaScript -->
    </select>

    <!-- Buttons for adding boxes/items and searching -->
    <button id="addButton">Add</button>
    <input type="text" id="searchInput" placeholder="Search...">
    <button id="searchButton">Search</button>

    <!-- Display selected box contents here (hidden by default) -->
    <div id="boxContents" style="display: none;"></div>

    <!-- Popup for no results -->
    <div class="popup" id="noResultsPopup">
      <p>No results found for your search.</p>
      <button id="closePopupButton">Close</button>
    </div>

    <!-- JavaScript -->
    <script>
      // Sample data structure without JSON
      const boxes = [
        { boxId: 1, boxName: 'Box 1', items: ['Item 1', 'Item 2'] },
        { boxId: 2, boxName: 'Box 2', items: ['Item A', 'Item B'] },
        // Add more boxes as needed
      ];

      // Function to populate the dropdown with box names
      function populateBoxDropdown() {
        const selectBoxToAdd = document.getElementById('selectBoxToAdd');
        selectBoxToAdd.innerHTML = '<option value="" disabled selected>Select Box</option>';

        for (const box of boxes) {
          const option = document.createElement('option');
          option.value = box.boxId;
          option.textContent = box.boxName;
          selectBoxToAdd.appendChild(option);
        }
      }

      // Initial population of the dropdown
      populateBoxDropdown();

      // Function to search within all boxes
      function search(query) {
        query = query.toLowerCase();

        const results = [];

        for (const box of boxes) {
          const boxResults = {
            boxId: box.boxId,
            boxName: box.boxName,
            items: box.items.filter(item =>
              item.toLowerCase().includes(query)
            ),
          };

          if (boxResults.items.length > 0) {
            results.push(boxResults);
          }
        }

        return results;
      }

      // Function to display all contents within a selected box
      function displayBoxContents(boxId) {
        const selectedBox = boxes.find(box => box.boxId == boxId);
        if (selectedBox) {
          const boxContents = document.getElementById('boxContents');
          boxContents.innerHTML = '';

          const boxDiv = document.createElement('div');
          boxDiv.classList.add('box');

          const boxTitle = document.createElement('h2');
          boxTitle.textContent = selectedBox.boxName;
          boxDiv.appendChild(boxTitle);

          const itemList = document.createElement('ul');
          selectedBox.items.forEach(item => {
            const listItem = document.createElement('li');
            listItem.textContent = item;
            itemList.appendChild(listItem);
          });

          boxDiv.appendChild(itemList);
          boxContents.appendChild(boxDiv);

          // Show the box contents
          boxContents.style.display = 'block';
        }
      }

      // Event listener for the "Add" button and Enter key
      const addButton = document.getElementById('addButton');
      const itemNameInput = document.getElementById('itemNameInput');
      const selectBoxToAdd = document.getElementById('selectBoxToAdd');
      const searchInput = document.getElementById('searchInput');

      addButton.addEventListener('click', () => {
        addItem();
      });

      itemNameInput.addEventListener('keyup', (event) => {
        if (event.key === 'Enter') {
          addItem();
        }
      });

      searchButton.addEventListener('click', () => {
        searchItems();
      });

      searchInput.addEventListener('keyup', (event) => {
        if (event.key === 'Enter') {
          searchItems();
        }
      });

      function addItem() {
        const addBoxCheckbox = document.getElementById('addBoxCheckbox');
        const addItemCheckbox = document.getElementById('addItemCheckbox');
        const boxNameInput = document.getElementById('boxNameInput');

        if (addBoxCheckbox.checked) {
          const boxName = boxNameInput.value.trim();
          if (boxName !== '') {
            const newBox = {
              boxId: boxes.length + 1,
              boxName,
              items: [],
            };
            boxes.push(newBox);
            boxNameInput.value = ''; // Clear the input
            populateBoxDropdown(); // Update the dropdown
            alert(`Box "${boxName}" added successfully!`);
          } 
        }

        if (addItemCheckbox.checked) {
          const itemName = itemNameInput.value.trim();
          const selectedBoxId = selectBoxToAdd.value;

          if (itemName !== '' && selectedBoxId) {
            const selectedBox = boxes.find(box => box.boxId == selectedBoxId);

            if (selectedBox) {
              selectedBox.items.push(itemName);
              itemNameInput.value = ''; // Clear the input
              displayBoxContents(selectedBoxId); // Show contents of the selected box
              alert(`Item "${itemName}" added to "${selectedBox.boxName}" successfully!`);
            } else {
              alert('Box not found. Please select a valid box.');
            }
          } else {
            alert('Please enter an item name and select a box.');
          }
        }
      }

      // Event listener for showing/hiding input fields based on checkboxes
      const addBoxCheckbox = document.getElementById('addBoxCheckbox');
      const addItemCheckbox = document.getElementById('addItemCheckbox');
      const boxNameInput = document.getElementById('boxNameInput');

      addBoxCheckbox.addEventListener('change', () => {
        if (addBoxCheckbox.checked) {
          boxNameInput.style.display = 'inline-block';
        } else {
          boxNameInput.style.display = 'none';
        }
      });

      addItemCheckbox.addEventListener('change', () => {
        if (addItemCheckbox.checked) {
          boxNameInput.style.display = 'none';
          itemNameInput.style.display = 'inline-block';
          selectBoxToAdd.style.display = 'inline-block';
        } else {
          itemNameInput.style.display = 'none';
          selectBoxToAdd.style.display = 'none';
        }
      });

      function searchItems() {
        const query = searchInput.value.trim();

        if (query !== '') {
          const searchResults = search(query);
          displayResults(searchResults);
        } else {
          alert('Please enter a search query.');
        }
      }

      function displayResults(results) {
        const boxContents = document.getElementById('boxContents');
        boxContents.innerHTML = '';

        if (results.length === 0) {
          // Display the "No results" popup
          const noResultsPopup = document.getElementById('noResultsPopup');
          noResultsPopup.style.display = 'block';
        } else {
          // Hide the "No results" popup
          const noResultsPopup = document.getElementById('noResultsPopup');
          noResultsPopup.style.display = 'none';

          // Display the results
          for (const result of results) {
            const boxId = result.boxId;
            displayBoxContents(boxId);
          }
        }
      }
    </script>
  </div>
</body>
</html>
